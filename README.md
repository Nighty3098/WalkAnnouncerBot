# Telegram Walk Announcer Bot

## Описание
Бот для сбора и публикации анонсов прогулок в Telegram-канале с модерацией. Позволяет любому пользователю создать красивый анонс прогулки, отправить его на модерацию и опубликовать в целевом канале. Поддерживает предпросмотр, редактирование, быстрые кнопки, отмену на любом этапе, хранение и удаление своих анонсов.

## Основной функционал
- Диалоговый сбор информации о прогулке (тема, место, дата/время, стоимость, контакт, описание, фото)
- Предпросмотр анонса с возможностью редактирования каждого поля
- Отправка анонса на модерацию администратору
- Публикация анонса в канал после одобрения
- Возможность отклонения с комментарием (текст/голос)
- Команда `/myevents` — просмотр и удаление своих анонсов
- Дружелюбные сообщения, быстрые кнопки, отмена на любом этапе

## Команды бота
- `/start` — приветствие и главное меню
- `/myevents` — список ваших анонсов (ожидающих публикации и опубликованных) с возможностью удалить

## Переменные окружения (.env)
- `BOT_TOKEN` — токен Telegram-бота
- `ADMIN_USERNAME` — username администратора (для информации)
- `ADMIN_CHAT_ID` — chat id для модерации (куда бот отправляет анонсы на проверку)
- `CHANNEL_ID` — id канала для публикации анонсов (например, `@go_chill` или `-100...`)
- `CHANNEL_USERNAME` — username канала для хештега и ссылок (например, `@go_chill`)

## Запуск локально
1. Скопируйте `.env.example` в `.env` и заполните переменные.
2. Установите зависимости:
   ```bash
   npm install
   ```
3. Запустите бота:
   ```bash
   npm start
   ```

## Деплой на Vercel
- Для работы на Vercel потребуется отдельный обработчик для webhook (Express-совместимый).
- Укажите переменные окружения в настройках проекта Vercel.
- Для webhook используйте путь `/api` (см. документацию Telegraf + Vercel).

## Структура проекта
```
├── src/
│   ├── bot.js         # Основная логика бота
│   ├── fsm.js         # FSM для диалогов
│   ├── messages.js    # Все тексты сообщений
│   └── ...
├── .env.example       # Пример переменных окружения
├── package.json
├── README.md
```

## FAQ
**Q:** Почему бот не отвечает на /myevents?
**A:** Команда работает только если бот запущен и вы уже создавали анонсы. Если бот был перезапущен, все анонсы сбрасываются (in-memory).

**Q:** Как изменить хештег канала?
**A:** Измените переменную `CHANNEL_USERNAME` в `.env`.

**Q:** Как добавить новые поля или изменить тексты?
**A:** Все тексты вынесены в `src/messages.js`. Для новых полей — доработайте FSM в `src/bot.js` и `src/fsm.js`.
